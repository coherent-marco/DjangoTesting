Model Testing
=============

For _model_ tests, the focus is on data integrity and any features your object should implement.  
As a __minimum__, you should test the object is saved correctly and that the string representation works.

A sample model test logic may be like this:  
_Core tests_
+ Test can save and retrieve object (mandatory fields only)
+ Test string representation (to help with debugging)
+ Test can save and retrieve object with optional fields
+ Test default values

_Logic tests_  
+ Test raise validation errors (eg. empty text content)
+ Test database integrity errors (eg. duplicate items)
+ Test specific business logic (eg. min age must be less than max age)
+ Test edge cases (eg. min age must be non negative)

An example basic test:
```python
from django.contrib.auth import get_user_model
from django.test import TestCase

from app.models import Blog

class BlogTest(TestCase):
    def setUp(self):
        # Code Django will run before each test
        # eg. Create a fake user account if needed
        # Django will automatically create a test database before this step
        self.user = User(email='test@abc.com')
    
    def tearDown(self):
        # Code Django will run at the end of each test
        # eg. Delete any files generated by the test
        # Do not need to clear database - Django handles this automatically
        pass

    def test_save_and_retrieve(self):
        # 1. Set up the test
        blog = Blog()
        blog.author = self.user
        blog.title = 'this is the title'
        blog.content = 'this is the blog content'
        blog.save() 
        
        # 2. Do the test
        blogs = Blog.objects.all()
        first_blog = blogs[0]
        
        # 3. Check if it worked or not
        self.assertEqual(len(blogs), 1, 'Found %s blogs' % len(blogs))
        self.assertEqual(first_blog.author, self.user)
        self.assertEqual(first_blog.title, 'this is the title')
        self.assertEqual(first_blog.content, 'this is the blog content')
       
    def test_string_representation(self):
        blog = Blog.objects.create(
            author=self.user,
            title='this is the title',
            content='this is the blog content'
        )
        
        first_blog = Blog.objects.get()
        
        self.assertEqual(str(first_blog), 'Blog %s' % first_blog.pk)
```